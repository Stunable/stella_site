{% extends "retailers/retailer_base.html" %}

{% block title %} Stunable | Stylist Administration {% endblock %}

{% block body_class %}common large_common pad-bottom{% endblock %}
{% block content-class%}round-corner-shadow{%endblock%}

{% load pagination %}


{% block inner_content %}


<style type="text/css">
	.account #page-content {
		margin-top: 0px;
	}
	select {
	    display: inline;
	}
	input {
		display: block;
	  }
	  .inner-table td{
	      width: 20%;
	  }
    .big{
        font-size:1.4em;
    }
    .small{
        font-size:.9em;
    }
    .product_list_table th,td{
        text-align: center;
        font-weight: lighter;
    }
    .notconfirm .nodeets .variation,.notconfirm .nodeets .addl_pic{
        display: none;
        border-bottom:none;
    }
 
    .confirm .deetsclick{
        display:none;
    }

    .picture_box{
        max-height: 300px;
        overflow:auto;
    }

    .picture_box img{
        margin-top:10px;
        -webkit-margin-bottom-collapse: :10px;
        display:block;
    }

    .notconfirm .deetsclick{
        color:#EC67F0;
        cursor:pointer;
    }

    .product_list_table th,td.heading{
        font-weight: 600;
        font-size:.8em;
        color:#777;
    }
    .product_list_table td.saleprice{
        color:red;
    }
    .product_list_table td.warning{
        color:orange;
    }
    .product_list_table td.inventory0{
        color:red;
    }
    .product_list_table .action-checkbox{
        text-align: center;
    }
    .product_list_table .action-checkbox {
        /*text-align: center;*/
        font-size: .8em;
    }
    .product_list_table .action-checkbox input{
        /*text-align: center;*/
        margin-left:40%;
    }
    .product_list_table .action-checkbox>div{
        margin-top:16px;
        cursor:pointer;
    }

    #bulk_add_box{
        border-radius:5px;
        width:300px;
 /*       float:right;*/
        margin:10px;
        position:relative;
        font-size:15px;
        height:440px;
    }

     div.expandable{
           padding:8px;
           border-radius:5px;
           border:1px solid #ccc;

    /*       float:right;*/
           margin:10px;
           position:relative;
           font-size:15px;

       }

    div.expandable.collapsed{
        max-height:71px;
        overflow:hidden;
        width:240px;
        border:none;
        padding:0px;
    }

    #API_Forms.expandable.collapsed{
        max-height:90px;
    }

    #addbuttons div{
        margin:20px;
    }

    #bulk_add_box form p label{
        display:none;
    }


    #id_uploaded_zip{
        font-size:1em;
        /*text-align: left;*/
        position:absolute;
        top:360px;
        left:10px;
        width:200px;
    }


    #bulk_add_box .submit_holder{
        position:absolute;
        top:390px;
        left:10px;
    }


    #product_table{
        max-width:910px;
        overflow:auto;
    }
    .productlist .errorlist li{
        margin:5px;
    }

    #apiList{
        background-color:#eee;
        padding:20px;
    }

    #apiList form{
        margin:10px;
        padding:10px;
        border:1px solid black;
        border-radius: 8px;
    }

    .api_form img{
        margin-bottom:20px;
    }

    #progress_box{
        font-size: 1.5em;
    }

    table.noborders td{
        border:none;
    }

</style>

<script>var updates_in_progress = {{updates_in_progress|length}};</script>




<div class="section intro clearfix">
            <h2><span>Product List:</span></h2><h3><span class="big">{{ retailer_profile.name }}</span></h3>
</div>
<div class="section productlist body-copy bootstrap {% if not confirm %}not{% endif %}confirm">
    
    {% if action %}
        <form class="action_submit" action="/item_action?next={% url product_list %}" method="post">
        <p class="emphasize"> Are you sure you want to delete the following items?</p>
        <br>
        <input type="hidden" name="confirm_{{confirm.action_name}}" value="True">
        <input type="hidden" name="action_name" value="{{confirm.action_name}}">
    {% else %}
        {% if upload %}
            <p>
                Thank you for uploading your products.  We have sent you an email to confirm we got the upload and we will get them up on the site as soon as possible.

               <!--  Here are the results of your upload.
                {% if upload.uploaderror_set.all|length %}
                <p> Looks like there were a few issues:</p>
                <div style="margin-left:25px;background-color:#eee;padding:5px">
                    {% for error in upload.uploaderror_set.all %}
                        <p>{{error|safe}}</p>
                    {% endfor %}
                {% endif %}
                </div> -->

            </p>
    {% endif %}
    {% if bulk_upload_form %}
    <div>
      <table class="noborders" id="APIs" cellspacing="10px" cellpadding="1px">
        <tr><td style="text-align:left">Products connected and synced through </td></tr>
          <tr>
           {% for api in retailer_profile.get_APIs %}
    <td style="text-align:left">
        <a><img src="{{ STATIC_URL }}{{api.get_child.logo}}" alt="shopify"></a>
    </td>

      {% endfor %}
       <tr><td class="small" style="text-align:left">All product attributes will be synced with their original sources several times daily.<br>
                                        Modifications to products on Stunable will not affect the originals on the API from whence they came.<br>
                                        Changes to product descriptions on Stunable will not be overwritten by changes made on the originals.<br>
                                        Any questions?  Email us at <a style="color:#000" href="mailto:stylists@stunable.com?subject=API Integration Product Sync">stylists@stunable.com</a> 
                                        <br>

       </td></tr>
        </table>
    </div>
    {% if updates_in_progress %}
    <p>Your Products are updating, the page will automatically every few seconds until they are finished.</p>
    <div id="progress_box"></div>
    <br><br>
    {% endif %}
    {% endif %}
    <form class="action_submit" action="/item_action?next={% url product_list %}" method="post">
        {% if not confirm %}
        <select style="display:none" id="action_select" name="action_name">
            <option value="-------------">-------------</option>
            <option name="action" value="delete">Delete Selected</option>
        </select>
        <input style="display:none;margin-right:20px;margin-bottom:5px" type="submit" value="Go">
        {% endif %}

    {% endif %}
    {% csrf_token %}
    <div id="product_table">
    {% if not action %}
        {% pagination product_list %}
    {% endif %}
    <div class="vertscroll">
    <table class="product_list_table">
        <tbody>
            {% if not confirm %}
            <!-- This is the "select all" action-checkbox -->
            <tr>
                <td>
                    <input class="select_all" data-target=".item_selector" type="checkbox">
                </td>
                <td>
                    select all
                </td>
                <td colspan=5>
                </td>
            </tr>
            {% endif %}

            {% for item in product_list.object_list %}
                {% include "retailers/product_with_inv_tr.html" %}
            {% endfor %}
        </tbody>
    </table>
    {% if not action %}
        {% pagination product_list %}
    {% endif %}
    </div>
    </div>
    {% if confirm %}
   
        {% if action %}
        <a href="{% url product_list %}"><input type="button" value="Cancel"></a>
        <input style="display:inline;margin-right:20px;margin-top:15px" type="submit" value="Yes. I'm sure.">
        {% endif %}
    {% endif %}
{% if action or confirm %}
</form>
{% endif %}
{% endblock %}

